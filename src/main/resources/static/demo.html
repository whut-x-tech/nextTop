<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>æ¯æ—¥æ‰“å¡ç³»ç»Ÿï¼ˆæ¨¡æ‹Ÿï¼‰</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/layui@2.8.17/dist/css/layui.css">
</head>
<body class="layui-container">

<h2 class="layui-text-center">ğŸ“Œ æ¯æ—¥æ‰“å¡ç³»ç»Ÿ</h2>

<!-- æ‰“å¡åŒº -->
<div class="layui-card">
  <div class="layui-card-header">æ‰“å¡æ“ä½œ</div>
  <div class="layui-card-body">
    <button class="layui-btn" id="checkinBtn">ğŸ“¤ ä¸Šä¼ èµ„æ–™æ‰“å¡</button>
    <input type="file" id="fileUpload" style="display: none;" />
    <p id="status" class="layui-text"></p>
  </div>
</div>

<!-- æ’è¡Œæ¦œ -->
<div class="layui-card">
  <div class="layui-card-header">ğŸ† æ’è¡Œæ¦œï¼ˆæ¨¡æ‹Ÿæ•°æ®ï¼‰</div>
  <div class="layui-card-body">
    <table class="layui-table" id="rankingTable"></table>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/layui@2.8.17/dist/layui.js"></script>
<script>
    layui.use(['table', 'layer'], function () {
      const table = layui.table;
      const layer = layui.layer;

      // æ¨¡æ‹Ÿæ’è¡Œæ¦œæ•°æ®
      let rankingData = [
        { username: 'æ¸…é£', totalDays: 12, lastCheckin: '2025-06-23 10:32' },
        { username: 'test', totalDays: 5, lastCheckin: '2025-06-22 08:50' },
        { username: 'lucifer', totalDays: 3, lastCheckin: '2025-06-21 19:10' },
        { username: 'lff624', totalDays: 1, lastCheckin: '2025-06-20 11:27' },
        { username: 'å‰ç«¯', totalDays: 1, lastCheckin: '2025-06-19 09:45' },
      ];

      // æ¸²æŸ“æ’è¡Œæ¦œè¡¨æ ¼
      function loadRanking() {
        table.render({
          elem: '#rankingTable',
          cols: [[
            { type: 'numbers', title: 'æ’å', width: 80 },
            { field: 'username', title: 'ç”¨æˆ·å' },
            { field: 'totalDays', title: 'ç´¯è®¡æ‰“å¡å¤©æ•°' },
            { field: 'lastCheckin', title: 'æœ€è¿‘æ‰“å¡æ—¶é—´' }
          ]],
          data: rankingData,
          page: false
        });
      }

      loadRanking();

      // ç»‘å®šä¸Šä¼ æŒ‰é’®
      document.getElementById('checkinBtn').addEventListener('click', () => {
        document.getElementById('fileUpload').click();
      });

      document.getElementById('fileUpload').addEventListener('change', function () {
        const file = this.files[0];
        if (!file) return;

        // æ¨¡æ‹Ÿä¸Šä¼ å’Œæ‰“å¡é€»è¾‘
        const now = new Date().toLocaleString();
        layer.msg(`æ‰“å¡æˆåŠŸï¼ä¸Šä¼ äº†æ–‡ä»¶ï¼š${file.name}`);
        document.getElementById('status').innerText = `âœ… å·²æ‰“å¡ï¼š${now}`;

        // å°†å½“å‰ç”¨æˆ·æ‰“å¡ä¿¡æ¯åŠ å…¥æ’è¡Œæ¦œï¼ˆæ¨¡æ‹Ÿï¼‰
        rankingData.unshift({
          username: 'ä½ è‡ªå·±',
          totalDays: 1,
          lastCheckin: now
        });

        // é‡æ–°åŠ è½½æ’è¡Œæ¦œ
        loadRanking();
      });
    });
  </script>
</body>
</html>
